From ee123c3d1706bc4346511b1a9032020782576350 Mon Sep 17 00:00:00 2001
From: Ron Lieberman <ron.lieberman@amd.com>
Date: Thu, 17 Aug 2023 11:02:47 -0500
Subject: [PATCH] [Options] use Visibilty

Change-Id: I2b0fae82e917b4902609a1fba70032939a165299
---
 amd/comgr/src/comgr-compiler.cpp | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/comgr-compiler.cpp b/src/comgr-compiler.cpp
index d421ea0c094b..aaf902b143d9 100644
--- a/src/comgr-compiler.cpp
+++ b/src/comgr-compiler.cpp
@@ -205,10 +205,10 @@ bool AssemblerInvocation::createFromArgs(AssemblerInvocation &Opts,
   // Parse the arguments.
   const OptTable &OptTbl = getDriverOptTable();
 
-  const unsigned IncludedFlagsBitmask = options::CC1AsOption;
+  llvm::opt::Visibility VisibilityMask(options::CC1AsOption);
   unsigned MissingArgIndex, MissingArgCount;
   InputArgList Args = OptTbl.ParseArgs(Argv, MissingArgIndex, MissingArgCount,
-                                       IncludedFlagsBitmask);
+                                       VisibilityMask);
 
   // Check for missing argument error.
   if (MissingArgCount) {
@@ -221,7 +221,7 @@ bool AssemblerInvocation::createFromArgs(AssemblerInvocation &Opts,
   for (const Arg *A : Args.filtered(OPT_UNKNOWN)) {
     auto ArgString = A->getAsString(Args);
     std::string Nearest;
-    if (OptTbl.findNearest(ArgString, Nearest, IncludedFlagsBitmask) > 1) {
+    if (OptTbl.findNearest(ArgString, Nearest, VisibilityMask) > 1) {
       Diags.Report(diag::err_drv_unknown_argument) << ArgString;
     } else {
       Diags.Report(diag::err_drv_unknown_argument_with_suggestion)
-- 
2.44.0

